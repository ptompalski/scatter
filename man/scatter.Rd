% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/scatter.R
\name{scatter}
\alias{scatter}
\title{Scatterplot with Observed and Predicted Values}
\usage{
scatter(
  data,
  observed,
  predicted,
  add_metrics = FALSE,
  r2_method = c("sum_of_squares", "correlation")
)
}
\arguments{
\item{data}{A data frame or tibble. Can be grouped (using `dplyr::group_by`) to create faceted plots.}

\item{observed}{The column name in `data` containing observed values. Should be unquoted.}

\item{predicted}{The column name in `data` containing predicted values. Should be unquoted.}

\item{add_metrics}{Logical. If `TRUE`, agreement metrics (RÂ², bias, RMSE) will be added 
as text annotations to the plot. For grouped data, metrics are calculated and displayed for each group.}

\item{r2_method}{A character string indicating the method for calculating \(R^2\). 
Options are `"sum_of_squares"` (default) for the traditional \(R^2\) based on 
residual and total sums of squares, or `"correlation"` for the square of the 
Pearson correlation coefficient between observed and predicted values.}
}
\value{
A ggplot object.
}
\description{
This function creates a scatterplot comparing observed and predicted values.
It supports grouped data, adding facets for each group, and optionally includes 
agreement metrics as text annotations in the plot.
}
\details{
The function dynamically calculates axis ranges based on the observed and predicted values 
and ensures the plot is square by using `coord_fixed()`. For grouped data, it uses `facet_wrap` 
to create separate scatterplots for each group. 

Agreement metrics are calculated using the `agreement_metrics` function.
}
\examples{
# Example data
set.seed(123)
df <- data.frame(
  group = rep(c("A", "B", "C"), each = 50),
  observed = c(rnorm(50, 10, 2), rnorm(50, 20, 3), rnorm(50, 15, 4)),
  predicted = c(rnorm(50, 10, 2), rnorm(50, 20, 3), rnorm(50, 15, 4))
)

# Simple scatterplot
scatter(df, observed, predicted)

# Scatterplot with agreement metrics
scatter(df, observed, predicted, add_metrics = TRUE)

# Grouped scatterplot with agreement metrics
df \%>\% 
group_by(group) \%>\%
scatter(observed, predicted, add_metrics = TRUE)

}
